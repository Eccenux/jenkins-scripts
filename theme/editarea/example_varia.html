<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="fr" >
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>EditArea - the code editor in a textarea</title>
	<script language="Javascript" type="text/javascript" src="lib/edit_area_full.js"></script>
	<script language="Javascript" type="text/javascript">
		// initialisation
		editAreaLoader.init({
			id: "example_1"	// id of the textarea to transform		
			,start_highlight: true	// if start with highlight
			,allow_resize: "both"
			,allow_toggle: true
			,word_wrap: true
			,language: "en"
			,syntax: "java"	
		});
	</script>
</head>
<body>
<h2>EditArea java/groovy example</h2>
<form action='' method='post'>
	<fieldset>
		<legend>Example 1</legend>
		<p>Test in English with php syntax, highlighted, toggle enabled, word-wrap enabled, resize enabled and default toolbar. Also offer the possibility to switch on/off the readonly mode.</p>
		<textarea id="example_1" style="height: 350px; width: 100%;" name="test_1">
// wersja do ustawienia opisu
println("\n[DEBUG] wersja do ustawienia opisu");

def versionDesc = build.buildVariableResolver.resolve("VersionDesc");

// read files from workspace
def workspace = build.getEnvVars()["WORKSPACE"];
// for hudson.FilePath (works on slaves)
def nodeChannel = build.workspace.channel

// "15351"
def svnVersion = new hudson.FilePath(nodeChannel, workspace + '/artifacts/svn-revision').readToString();
// "19.0.3/release" -> "19.0.3"
def applicationVersion = new hudson.FilePath(nodeChannel, workspace + '/artifacts/svn-tag').readToString().replaceAll(~/([\d\.]+)[\s\S]+/, '$1');

description = "${applicationVersion}.${svnVersion}"
if (!versionDesc?.isEmpty()) {
  	description += "\n<br>" + versionDesc;
}

// set for now
build.setDescription(description);

// this won't work for mult-line strings
// save for later (e.g. for UniwersalBuildChecker)
//println("[DESC] " + description);
</textarea>
	</fieldset>
</form>
</body>
</html>
